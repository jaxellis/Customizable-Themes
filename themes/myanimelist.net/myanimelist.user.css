/* ==UserStyle==
@name           MyAnimeList Customizable Theme
@namespace      https://github.com/jaxellis/Customizable-Themes
@version        1.1.0
@description    Customizable theme for MyAnimeList
@author         Jaxellis
@homepageURL    https://github.com/jaxellis/Customizable-Themes/tree/main/themes/myanimelist.net
@supportURL 	https://github.com/jaxellis/Customizable-Themes/issues
@updateURL      https://github.com/jaxellis/Customizable-Themes/tree/main/themes/myanimelist.net/myanimelist.user.css
@license        GPL-3.0-or-later; https://www.gnu.org/licenses/gpl-3.0.txt

@preprocessor   stylus
@var checkbox	wide-mode-enabled		"Wide Mode"       				1
@var color		theme-background-color	"Background"       				rgba(0, 0, 0, 1)
@var color  	theme-foreground-color	"Foreground"       				rgba(10, 10, 10, 1)
@var color  	theme-main-color        "Main Accent"      				rgba(0, 255, 255, 1)
@var color  	theme-text-color        "Text"            				rgba(197, 197, 197, 1)
@var color  	theme-completed-color	"Completed"       				rgba(30, 80, 200, 1)
@var color  	theme-planning-color	"Planning"       				rgba(50, 50, 50, 1)
@var color  	theme-current-color		"Watching/Reading"       		rgba(0, 255, 255, 1)
@var color  	theme-onhold-color		"On-Hold"       				rgba(255, 220, 100, 1)
@var color  	theme-dropped-color		"Dropped"       				rgba(255, 0, 0, 1)

==/UserStyle== */
@-moz-document regexp("http(s|)://myanimelist.net\\/(?!animelist|mangalist).*") {
	/* We use regex here to not overwrite custom list themes */
	:root {
		if wide-mode-enabled==1 {
			/* 1440p (ish) */
			@media (min-width: 2115px) {
				--left-column-width: 88%;
			}

			/* 1080p (ish) */
			@media (min-width: 1600px) and (max-width: 2114px) {
				--left-column-width: 85%;
			}

			/* >1080p (ish) */
			@media (max-width: 1599px) {
				--left-column-width: 65%;
			}
		}
	}

	/* Theme Coloring */
	/* Main Body */
	#contentWrapper,
	#contentWrapper #content,
	#contentWrapper div h1 {
		background-color: theme-background-color !important;
	}

	/* This is for loading screens */
	body:not(.ownlist) {
		background-color: theme-background-color !important;
	}

	/* Buttons */
	.inputButton {
		background-color: theme-foreground-color !important;
		&:hover {
			box-shadow: inset 0 0 8px theme-main-color;
		}
	}

	/* Icons */
	i {
		color: theme-main-color !important;

		&:hover {
			color: theme-text-color !important;
		}
	}

	/* Links */
	a {
		color: theme-main-color !important;
	}

	/* Select Boxes */
	select {
		background-color: theme-foreground-color !important;
		border-color: theme-main-color !important;
		color: theme-text-color;
	}

	/* Text */
	div,
	p,
	span,
	.text {
		color: theme-text-color !important;
	}

	/* Text Boxes */
	input,
	textarea {
		background-color: theme-foreground-color !important;
		border-color: theme-main-color !important;
		color: theme-text-color !important;
	}

	/* 'Success' box */
	.goodresult {
		border-color: theme-main-color !important;
	}

	/* Default Table Theming */
	#contentWrapper #content #dialog,
	#dialog div {
		background-color: theme-foreground-color !important;
		border: none !important;
	}

	/* Only appears when logged out */
	.external-link,
	mal-tooltip::part(tooltip),
	a.left-info-block-notify-on-air-button2 {
		background-color: theme-foreground-color !important;
	}

	/* Scrollbar */
	/* Scrollbar Slider */
	body::-webkit-scrollbar-thumb,
	::-webkit-scrollbar-thumb {
		background: theme-main-color;
		overscroll-behavior-y: contain;
	}

	/* Scrollbar Full Bar */
	body::-webkit-scrollbar-track,
	::-webkit-scrollbar-track {
		background: theme-foreground-color;
	}

	body::-webkit-scrollbar {
		width: 8px;
		height: 8px;
	}

	/* Header */
	#headerSmall {
		background-color: theme-foreground-color !important;
	}
	.page-common .h1 {
		background-color: theme-background-color !important;
	}

	/* Main Content Elements */
	body.index .left-column {
		border-color: theme-foreground-color !important;
	}
	.page-common #content {
		border-color: theme-foreground-color;
	}

	/* 2nd Header */
	.page-common .h1 {
		border-color: theme-foreground-color !important;
		border-bottom-color: theme-main-color !important;
		color: theme-text-color;
	}

	/* Nav */
	.wrapper #menu,
	.wrapper #menu div {
		background: theme-foreground-color !important;
	}

	#horiznav_nav {
		border-color: theme-main-color !important;

		&.horiznav_active {
			background-color: theme-background-color !important;
			color: theme-text-color !important;
		}
	}

	#horiznav_nav li {
		background-color: theme-foreground-color !important;
	}

	#horiznav_nav li a {
		background-color: theme-foreground-color !important;

		&:hover {
			background-color: theme-background-color !important;
			box-shadow: inset 0 0 8px theme-main-color !important;
		}
	}

	/* Nav Menu Dropdown*/
	#nav > li * {
		background-color: theme-foreground-color !important;

		&:hover {
			background-color: theme-background-color !important;
			box-shadow: inset 0 0 8px theme-main-color;
		}
	}

	/* Search Bar */
	.page-common #topSearchText {
		border-color: theme-main-color !important;
		background-color: theme-background-color !important;
		color: theme-text-color !important;
	}

	#topSearchValue {
		background-color: theme-background-color !important;
		color: theme-text-color !important;
		border: none !important;
	}

	/* Yeah they misspelled button */
	#topSearchButon {
		background-color: theme-background-color !important;
		border-color: theme-main-color !important;
	}

	/* Search Results */
	#topSearchResultList .list.separator * {
		background-color: theme-background-color !important;
	}

	#topSearchResultList .on .info {
		background: theme-background-color !important;

		&:hover {
			box-shadow: inset 0 0 8px theme-main-color !important;
		}
	}

	#topSearchResultList .on .info * {
		background-color: transparent !important;
	}

	#topSearchResultList .list-bottom:hover {
		background: theme-background-color !important;
		box-shadow: inset 0 0 8px theme-main-color !important;
	}

	/* Header Profile Picture */
	.header-profile-button {
		-webkit-box-shadow: theme-main-color 0 0 0 1px inset !important;
		box-shadow: theme-main-color 0 0 0 1px inset !important;
	}

	/* Account Menu Dropdown*/
	.header-profile-link > i:hover {
		color: theme-main-color !important;
	}

	.header-profile.link-bg {
		background-color: theme-foreground-color !important;

		&.on,
		&:hover {
			background-color: theme-background-color !important;
			box-shadow: inset 0 0 8px theme-main-color;
		}
	}

	.header-menu-dropdown li * {
		background-color: theme-foreground-color !important;

		&:hover {
			background-color: theme-background-color !important;
			box-shadow: inset 0 0 8px theme-main-color;
		}
	}

	/* Notifications */
	.header-notification-dropdown-inner h3 {
		background-color: theme-foreground-color !important;
	}

	.header-notification-item,
	.header-notification-view-all a {
		background-color: theme-foreground-color !important;
		border-color: theme-background-color !important;

		&:hover {
			background-color: theme-background-color !important;
			box-shadow: inset 0 0 8px theme-main-color !important;
		}
	}

	/* Annoucement Ribbon */
	.text-ribbon div {
		background-color: theme-foreground-color !important;

		&:hover {
			background-color: theme-background-color !important;
			box-shadow: inset 0 0 8px theme-main-color !important;
		}
	}

	/* Border/Background for Below Elements  */
	.work-graph {
		background-color: theme-foreground-color !important;
		border-color: theme-main-color !important;
	}

	/* The below only works with a single element, combining CW/CR or PTR/PTW will break */
	/* nots are used to target text*/
	/* CW/CR Colors */
	.watching:not(.work-status-num, .circle, .text),
	.watching::after {
		background-color: theme-current-color !important;
		color: theme-background-color !important;
	}

	.reading:not(.work-status-num, .circle, .text),
	.reading::after {
		background-color: theme-current-color !important;
		color: theme-background-color !important;
	}

	/* PTW/PTR color */
	.plan_to_watch:not(.work-status-num, .circle, .text),
	.plantowatch,
	.plan_to_watch::after {
		background-color: theme-planning-color !important;
		color: theme-background-color !important;
	}
	.plan_to_read:not(.work-status-num, .circle, .text),
	.plantoread,
	.plan_to_read::after {
		background-color: theme-planning-color !important;
		color: theme-background-color !important;
	}
	/* Completed color */
	.completed:not(.work-status-num, .circle, .text),
	.completed::after {
		background-color: theme-completed-color !important;
		color: theme-background-color !important;
	}

	/* On-Hold color */
	.on_hold:not(.work-status-num, .circle, .text),
	.on_hold::after {
		background-color: theme-onhold-color !important;
		color: theme-background-color !important;
	}

	/* Dropped Color */
	.dropped:not(.work-status-num, .circle, .text),
	.dropped::after {
		background-color: theme-dropped-color !important;
		color: theme-background-color !important;
	}

	.addtolist {
		background-color: theme-foreground-color !important;
	}

	/* Footer */
	/* Footer Ranking appears only when logged out (?) */
	.page-common #footer-block,
	.footer-ranking {
		background-color: theme-background-color !important;
	}

	/* Wide Mode */
	if wide-mode-enabled==1 {
		/* Main Body */
		.page-common #myanimelist {
			width: unset !important;
		}

		/* Nav Bar */
		.page-common #menu {
			width: unset !important;
		}

		/* 2nd Header h1 */
		/* Used on multiple pages // entry+people */
		#contentWrapper .h1-title {
			width: 100% !important;
		}

		/* Main Page Seasonal Anime Carousel */
		body.index .left-column {
			width: var(--left-column-width) !important;
		}
		.widget-slide-block .widget-slide-outer {
			width: unset !important;
		}

		.news-list .news-unit {
			width: unset !important;
		}
	}
}

@-moz-document regexp("http(s|)://myanimelist.net\\/profile.*") {
	/* Profile Links Under Profile Picture */
	.user-profile li {
		background-color: theme-foreground-color !important;
	}

	.user-profile li:has(> a):hover {
		box-shadow: inset 0 0 8px theme-main-color;
	}

	/* Buttons under profile picture */
	.user-function a {
		background-color: theme-foreground-color !important;

		&:hover {
			box-shadow: inset 0 0 8px theme-main-color;
		}
	}

	/* Disabled Buttons */
	.user-function .disabled {
		background-color: theme-background-color !important;
	}

	/* Anime / Manga list buttons */
	.btn-profile-submit {
		background-color: theme-foreground-color !important;

		&:hover {
			background-color: theme-background-color !important;
			box-shadow: inset 0 0 8px theme-main-color;
		}
	}
	/* Bar Background */
	.profile .statistics-updates .graph {
		background-color: theme-foreground-color !important;
		border-color: theme-main-color !important;
	}

	/* Stats Bar Background */
	.stats-graph {
		background-color: theme-background-color !important;
	}

	.profile-about-user table tbody tr td {
		background-color: transparent !important;
	}

	/* Wide Mode */
	if wide-mode-enabled==1 {
		/* Profile Stats Bar  */
		.stats-graph {
			width: unset !important;
		}

		.stats-graph {
			display: flex !important;
			justify-content: space-between;
		}
	}
}

@-moz-document regexp("http(s|)://myanimelist.net\\/(manga|anime).*") {
	/* "Add to" Buttons */
	div.profileRows a,
	div#profileRows a {
		background-color: theme-foreground-color !important;
		border-color: theme-main-color !important;

		&:hover {
			box-shadow: inset 0 0 8px theme-main-color;
		}
	}

	/* Popup window when going to edit an entry */
	.edit-info div#editdiv,
	div#editdiv div {
		background-color: theme-foreground-color !important;
	}

	/* Buy on Manga Store Button */
	.left-info-block-manga-store-button {
		background-color: theme-foreground-color !important;
	}

	/* Score Stats */
	.anime-detail-header-stats {
		.user-status-block,
		.stats-block {
			background-color: theme-foreground-color !important;

			/* Buttons/Options buttons */
			& .myinfo_addtolist,
			select#myinfo_status,
			select#myinfo_score,
			.form-user-episode {
				background-color: theme-background-color !important;
				border-color: theme-main-color !important;
				color: theme-text-color !important;
			}
		}
	}

	/* Character Table */
	.detail-characters-list {
		& table:nth-child(odd) td {
			background-color: lighten(theme-foreground-color, 2%) !important;
		}
		& table:nth-child(even) td {
			background-color: theme-foreground-color !important;
		}
	}

	/* Friend Updates */
	.table-recently-updated tbody {
		& tr:nth-child(odd) td {
			background-color: lighten(theme-foreground-color, 2%) !important;
		}
		& tr:nth-child(even) td {
			background-color: theme-foreground-color !important;
		}
	}

	/* Reviews */
	.manga-info-review__header,
	.anime-info-review__header,
	.review-element {
		background-color: theme-foreground-color !important;
	}

	/* Discussion Forums */
	.page-forum tbody {
		& tr:nth-child(odd) td {
			background-color: lighten(theme-foreground-color, 2%) !important;
		}
		& tr:nth-child(even) td {
			background-color: theme-foreground-color !important;
		}
	}
}

@-moz-document regexp("http(s|)://myanimelist.net\\/news.*") {
	if wide-mode-enabled==1 {
		/* Wide Mode */
		/* News Page Left Column */
		.news-content-block .content-left {
			width: var(--left-column-width) !important;
		}

		/* News Page Bredcrumbs */
		body.news .news-breadcrumbs {
			width: unset !important;
		}
	}
}

@-moz-document regexp("http(s|)://myanimelist.net/anime/season.*") {
	/* Wide Mode */
	if wide-mode-enabled==1 {
		/* Filter / Nav */
		.navi-seasonal {
			width: unset !important;
		}
	}
}

@-moz-document regexp("http(s|)://myanimelist.net/(top)(manga|anime).php.*") {
	/* Blue "Next" Boxes */
	.link-blue-box {
		background-color: theme-foreground-color !important;
		border: 1px solid theme-main-color;
	}
	
	/* TOP table */
	.top-ranking-table tbody {
		& tr:nth-child(odd) td {
			background-color: lighten(theme-foreground-color, 2%) !important;

			/* Status Button */
			&.status a {
				background-color: theme-foreground-color !important;
				color: theme-text-color !important;
				&:hover {
					background-color: theme-background-color !important;
					box-shadow: inset 0 0 8px theme-main-color;
				}
			}
		}
		& tr:nth-child(even) td {
			background-color: theme-foreground-color !important;

			/* Status Button */
			&.status a {
				background-color: lighten(theme-foreground-color, 2%) !important;
				color: theme-text-color !important;
				&:hover {
					background-color: theme-background-color !important;
					box-shadow: inset 0 0 8px theme-main-color;
				}
			}
		}
	}

	/* Popup when hovering over a title */
	/* They use a background image for the popup. since we can't theme that we remove the image completely then theme the popup itself. */
	.page-common .detail .hoverinfo {
		background: transparent !important;
		background-image: none !important;
		&::after {
			display: none;
		}
	}
	.hoverinfo-contaniner:has(div a) {
		color: theme-text-color !important;
		background-color: theme-background-color !important;
		border-radius: 5%;
	}
}

@-moz-document regexp("http(s|)://myanimelist.net/history/.*/updates") {
	/* Friend Update Notes */
	.history_content_wrapper .history-updates .notes {
		background-color: theme-foreground-color !important;
	}
}

@-moz-document regexp("http(s|)://myanimelist.net/login.php.*") {
	/* Input Boxes & Login button */
	.login-form-block .pt16 input {
		background-color: theme-background-color !important;
	}

	/* Social Login (Google) */
	.page-common .line .icon-social-login.icon-gp {
		background-color: theme-background-color !important;
		color: theme-text-color !important;
	}
}

